<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>usage of the name please</title>
  <link rel="stylesheet" href="gallery.css" />
  <link rel="icon" href="skull-icon.png" />
</head>
<body>
  <header>
    <h1>usage of the name please</h1>
    <a href="upload.html" class="admin-btn">
      <img src="skull-icon.png" alt="Admin" class="skull-icon" /> Admin Login
    </a>
  </header>

  <main>
    <div class="gallery-grid" id="gallery"></div>
  </main>

</div>





  <!-- APK Section -->
  <section class="apk-section">
    <h2>Download APKs</h2>
    <ul id="apkList" class="apk-list">
      <li>Loading APKs...</li>
    </ul>
  </section>

  <!-- Paste this script just before closing body -->
  <script>
    const repoUrl = "https://github.com/11PIYUSh/photo-gallery.git"; // Replace with your repo URL
    const repoParts = repoUrl.replace("https://github.com/", "").split("/");
    const username = repoParts[0];
    const repo = repoParts[1];
    const folder = "apks";

    async function loadAPKs() {
      const list = document.getElementById("apkList");
      list.innerHTML = "";

      try {
        const response = await fetch(`https://api.github.com/repos/${username}/${repo}/contents/${folder}`);
        const files = await response.json();

        if (!Array.isArray(files)) {
          list.innerHTML = "<li>Failed to load APKs.</li>";
          return;
        }

        files.forEach(file => {
          if (file.name.endsWith(".apk")) {
            const apkUrl = `https://${username}.github.io/${repo}/${folder}/${file.name}`;
            const li = document.createElement("li");
            li.innerHTML = `<a href="${apkUrl}" download>${file.name}</a>`;
            list.appendChild(li);
          }
        });

        if (list.children.length === 0) {
          list.innerHTML = "<li>No APKs found.</li>";
        }
      } catch (error) {
        list.innerHTML = "<li>Error loading APKs.</li>";
        console.error(error);
      }
    }

    loadAPKs();
  </script>
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>

  <script>
    const firebaseConfig = {
    apiKey: "AIzaSyBHiXDPWU0V9zBhoicWb7VL5YP6I7ZIcBo",
    authDomain: "website-f9439.firebaseapp.com",
    projectId: "website-f9439",
    storageBucket: "website-f9439.appspot.com",
    messagingSenderId: "614527810563",
    appId: "1:614527810563:web:42ad92fc101c83d095a236"
    };


    firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();

    const gallery = document.getElementById("gallery");

    storage.ref("images").listAll().then(result => {
      result.items.forEach(imageRef => {
        imageRef.getDownloadURL().then(url => {
          const imgDiv = document.createElement("div");
          imgDiv.className = "img-card";

          const img = document.createElement("img");
          img.src = url;
          img.alt = "Photo";
          img.className = "gallery-img";
          img.onclick = () => openModal(url);

          const downloadBtn = document.createElement("a");
          downloadBtn.href = url;
          downloadBtn.download = "";
          downloadBtn.innerText = "Download";
          downloadBtn.className = "download-btn";

          imgDiv.appendChild(img);
          imgDiv.appendChild(downloadBtn);
          gallery.appendChild(imgDiv);
        });
      });
    });

    function openModal(src) {
      document.getElementById("imageModal").style.display = "flex";
      document.getElementById("modalImage").src = src;
    }

    function closeModal() {
      document.getElementById("imageModal").style.display = "none";
    }
  </script>
</body>
</html>